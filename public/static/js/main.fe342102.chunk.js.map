{"version":3,"sources":["Original.js","App.js","index.js"],"names":["Original","useState","radius","setRadius","buttonWidth","setButtonWidth","width","setWidth","height","setHeight","showForm","setForm","product","setProduct","name","setName","phone","setPhone","image","setImage","currentProduct","setCurrentProduct","useEffect","window","alert","a","Axios","res","speed","generatingDataToDraw","data","length","map","elem","i","ref","Number","Reference","matching","push","text","Serial","Name","chance","RemainingStock","Chance","container","document","querySelector","offsetWidth","offsetHeight","Wheel","el","getElementById","duration","Speed","turntable","button","offset","onSuccess","placeOperation","addEventListener","console","log","goSyncronous","collection","localStorage","setItem","location","reload","current","Image","url","formSubmit","dateObj","Date","Ognoo","getFullYear","getMonth","getDate","put","_id","post","Ner","Utas","Baraa","Wrapper","className","id","src","div","initial","opacity","y","animate","x","transition","type","style","backgroundImage","margin","display","placeholder","value","onChange","e","target","onClick","styled","props","App","show","setShow","getItem","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.fe342102.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Wheel from \"lottery-wheel\";\r\nimport styled from \"styled-components\";\r\nimport Axios from \"axios\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst Original = () => {\r\n    const [radius, setRadius] = useState(0);\r\n    const [buttonWidth, setButtonWidth] = useState(0);\r\n    const [width, setWidth] = useState(0);\r\n    const [height, setHeight] = useState(0);\r\n    const [showForm, setForm] = useState(false);\r\n    const [product, setProduct] = useState(null);\r\n    const [name, setName] = useState('');\r\n    const [phone, setPhone] = useState('');\r\n    const [image, setImage] = useState('');\r\n    const [currentProduct, setCurrentProduct] = useState(null);\r\n\r\n    useEffect(() => {\r\n        // localStorage.setItem('Xdol!671', '!@E!@GRTM*');\r\n        window.alert('Хэрэглэгч та азын хүрдийг зөвхөн нэг удаа эргүүлэх боломжтойг анхаарна уу.');\r\n        const goSyncronous = async () => {\r\n\r\n            let res = await Axios('https://sugalaa2.herokuapp.com/lottery-wins?_sort=createdAt:DESC');\r\n            let speed = await Axios('https://sugalaa2.herokuapp.com/settings');\r\n            let generatingDataToDraw = [];\r\n            res.data.length && res.data.map((elem,i)=>{\r\n                let ref = Number(elem.Reference);\r\n                let matching = res.data[ref-1];\r\n                generatingDataToDraw.push({text: elem.Serial, name: elem.Name, ref: elem.Reference, chance: matching.RemainingStock < 1 ? 0 : matching.Chance})\r\n            })\r\n\r\n            let container = document.querySelector('.lottocontainer');\r\n            let width = container.offsetWidth;\r\n            let height = container.offsetHeight;\r\n            let radius = width * 0.15;\r\n            let buttonWidth = width * 0.07;\r\n\r\n            new Wheel({\r\n                el: document.getElementById(\"wheel1\"),\r\n                data: generatingDataToDraw,\r\n                radius,\r\n                buttonWidth,\r\n                duration: Number(speed.data.Speed + '000'),\r\n                image: {\r\n                    turntable: \"https://i.imgur.com/To3E48t.png\",\r\n                    button: \"https://i.imgur.com/i4XL4wY.png\",\r\n                    offset: -10,\r\n                },\r\n                onSuccess(data) {\r\n                    placeOperation(data, res.data);\r\n                },\r\n            });\r\n            window.addEventListener(\"resize\", ()=>console.log('resized'));\r\n            setRadius(radius);\r\n            setWidth(width);\r\n            setHeight(height);\r\n            setButtonWidth(buttonWidth);\r\n        }\r\n        goSyncronous();\r\n\r\n    }, []);\r\n\r\n    const placeOperation = async (data, collection) => {\r\n        if(Number(data.text) === 16) {\r\n            localStorage.setItem('Xdol!671', '!@E!@GRTM*');\r\n            window.alert('Та дараа дахин азаа үзээрэй! Баярлалаа.');\r\n            return document.location.reload();\r\n        }\r\n        let current = collection[Number(data.text) - 1];\r\n        // console.log(`text: ${data.text}, name: ${data.name}, ref: ${data.ref}`);\r\n        // console.log(current,'heey')\r\n\r\n        setForm(true);\r\n        setProduct(data.name);\r\n        setImage('https://sugalaa2.herokuapp.com'+current.Image.url);\r\n        setCurrentProduct(current);\r\n        localStorage.setItem('Xdol!671', '!@E!@GRTM*');\r\n    }\r\n    const formSubmit = async () => {\r\n        if(phone.length < 8){\r\n           return window.alert('Утасны дугаараа зөв оруулна уу!')\r\n        }\r\n        if(name.length <2){\r\n            return window.alert('Та нэрээ оруулна уу!');\r\n        }\r\n        let dateObj = new Date();\r\n        let Ognoo = dateObj.getFullYear() + '.' + (dateObj.getMonth() + 1) + '.' + (dateObj.getDate())\r\n        // console.log(name, phone, product, Ognoo);\r\n        await Axios.put(`https://sugalaa2.herokuapp.com/lottery-wins/${currentProduct._id}`, {RemainingStock: currentProduct.RemainingStock -1})\r\n        await Axios.post(`https://sugalaa2.herokuapp.com/winners`, {Ner: name, Utas: phone, Baraa: product, Ognoo});\r\n        window.alert('Амжилт хүсье!');\r\n        document.location.reload();\r\n    }\r\n    return (\r\n        <Wrapper width={width} height={height} radius={radius} buttonWidth={buttonWidth}>\r\n            <div className=\"lottocontainer\">\r\n                <img id=\"arrow\" src=\"https://i.imgur.com/dSIibwI.png\" />\r\n                <div id=\"wheel1\"></div>\r\n            </div>\r\n            <div className=\"fade\"></div>\r\n            {showForm &&\r\n            <motion.div initial={{opacity:0, y:60}} animate={{opacity:1, x:0, transition: {type: \"spring\"}}} id=\"form\" style={{backgroundImage:'url(https://i.imgur.com/H8yhPM9.gif)'}}>\r\n                <p>Баяр хүргэе, Та доорх мэдээллээ бөглөөд хонжвороо баталгаажуулна уу</p>\r\n                <img style={{height:150, margin:'0px auto', display:'block'}} src={image} />\r\n                <label><span>Таны хонжвор:</span><span>{product}</span></label>\r\n                <input type=\"text\" name=\"name\" placeholder=\"Нэр\" value={name} onChange={(e)=>setName(e.target.value)} />\r\n                <input type=\"text\" name=\"phone\" placeholder=\"Утас\" value={phone} onChange={(e)=>setPhone(e.target.value)} />\r\n                {/* <input type=\"text\" name=\"phone\" disabled placeholder={`Таны хонжвор: ${product}`} /> */}\r\n                <button onClick={formSubmit}>Илгээх</button>\r\n            </motion.div>\r\n            }\r\n        </Wrapper>\r\n    );\r\n};\r\n\r\nexport default Original;\r\n\r\nconst Wrapper = styled.div `\r\n    position:fixed;\r\n    top:0;\r\n    right:0;\r\n    bottom:0;\r\n    left:0;\r\n    z-index:999;\r\n    display:flex;\r\n    justify-content:center;\r\n    align-items:center;\r\n    background:rgba(0,0,0,0.7);\r\n    .fade{\r\n        position:absolute;\r\n        left:0;\r\n        top:0;\r\n        right:0;\r\n        bottom:0;\r\n        background: rgba(0,0,0,0.6);\r\n        z-index:1000;\r\n    }\r\n    .lottocontainer{\r\n        background:white;\r\n        position:absolute;\r\n        z-index:1001;\r\n        ${'' /* margin-left:10vw; */}\r\n        ${'' /* margin-top:2vw; */}\r\n        width:80vw;\r\n        height:45vw;\r\n        background-image: url(https://i.imgur.com/aWorWBt.png);\r\n        background-size: 100% 100%;\r\n        #wheel1{\r\n            width: calc(${props => props.radius * 2}px);\r\n            height: calc(${props => props.radius * 2}px);\r\n            margin-left: calc(${props => props.width / 2}px - ${props => props.radius}px);\r\n            margin-top: calc(${props => props.height / 2}px - ${props => props.radius}px);\r\n        }\r\n        #arrow{\r\n            position:absolute;\r\n            width:${props => props.width * 0.085}px;\r\n            margin-left: calc(${props => props.width / 2}px - ${props => props.width * 0.048}px);\r\n            margin-top: calc(${props => props.height / 2.08}px - ${props => props.radius}px);\r\n        }\r\n    }\r\n    #form{\r\n        position:absolute;\r\n        background:white;\r\n        z-index:1002;\r\n        padding:30px;\r\n        width:300px;\r\n        left:50%;\r\n        margin-left:-180px;\r\n        top:0;\r\n        ${'' /* margin-top: ${props => props.height / 2 - 150}px; */}\r\n        text-align:center;\r\n        background-size: 100% 300px;\r\n        background-repeat: no-repeat;\r\n        input{\r\n            border:none;\r\n            margin-top:15px;\r\n            border-bottom:1px solid rgba(0,0,0,0.1);\r\n            width:100%;\r\n            padding:10px;\r\n        }\r\n        label{\r\n            display:flex;\r\n            font-family:Arial;\r\n            span{\r\n                &:first-child{\r\n                    margin-right:10px;\r\n                }\r\n                &:last-child{\r\n                    font-weight:bold;\r\n                }\r\n            }\r\n        }\r\n        button{\r\n            display:block;\r\n            width:100%;\r\n            border:none;\r\n            margin-top:30px;\r\n            padding:15px;\r\n            &:hover{\r\n                cursor:pointer;\r\n            }\r\n        }\r\n    }\r\n`\r\n\r\nconst sanitize = (number) => {\r\n    switch(Number(number)){\r\n        case 1: return 1;\r\n        case 2: return 16;\r\n        case 3: return 15;\r\n        case 4: return 14;\r\n        case 5: return 13;\r\n        case 6: return 12;\r\n        case 7: return 11;\r\n        case 8: return 10;\r\n        case 9: return 9;\r\n        case 10: return 8;\r\n        case 11: return 7;\r\n        case 12: return 6;\r\n        case 13: return 5;\r\n        case 14: return 4;\r\n        case 15: return 3;\r\n        case 16: return 2;\r\n        default:\r\n            return 'fuck';\r\n    }\r\n}","import React, { useEffect, useState } from \"react\";\nimport Original from \"./Original\";\n\nconst App = () => {\n    const [show, setShow] = useState(false);\n    useEffect(() => {\n        !localStorage.getItem(\"Xdol!671\") && setShow(true);\n    }, []);\n    return (\n        <>\n            {show && <Original />}\n        </>\n    );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}